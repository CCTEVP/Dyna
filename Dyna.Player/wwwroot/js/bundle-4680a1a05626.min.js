function renderImageWidgets(){console.log("Rendering ImageWidgets");const n=document.querySelectorAll('[id^="image-widget-"]');n.forEach(()=>{})}function renderTextWidgets(){console.log("Rendering TextWidgets");const n=document.querySelectorAll('[id^="text-widget-"]');n.forEach(()=>{})}function renderCardWidgets(){console.log("Rendering CardWidgets");const t=document.querySelectorAll('[id^="card-widget-"]');let n=!1;t.forEach(t=>{const i=t.getAttribute("data-animation");i&&i!==""&&(n=!0);const u=new MutationObserver(n=>{n.forEach(n=>{if(n.type==="attributes"&&n.attributeName==="data-value"){const t=n.target,i=t.getAttribute("data-value");handleAttributeChange(t,n.attributeName,i)}})});u.observe(t,{attributes:!0});const r=t.getAttribute("data-value");r&&(t.textContent="",updateCardWidgetContent(t,r))});n&&typeof Dyna!="undefined"&&Dyna.Player&&Dyna.Player.TagHelpers&&Dyna.Player.TagHelpers.AssetTagHelper&&Dyna.Player.TagHelpers.AssetTagHelper.AddPresentAsset("CardWidgetAnimations","library")}function handleAttributeChange(n,t,i){if(t==="data-value"){const t=n.getAttribute("data-current-value")||"";if(i!==t){n.setAttribute("data-current-value",i);const r=n.getAttribute("data-animation");switch(r){case"roll":typeof animateCardWidgetRoll=="function"?animateCardWidgetRoll(n,t,i):(console.warn("Roll animation function not found. Make sure CardWidgetAnimations library is loaded."),updateCardWidgetContent(n,i));break;case"flip":typeof animateCardWidgetFlip=="function"?animateCardWidgetFlip(n,t,i):(console.warn("Flip animation function not found. Make sure CardWidgetAnimations library is loaded."),updateCardWidgetContent(n,i));break;default:updateCardWidgetContent(n,i)}}}}function animateCardWidgetRoll(n,t,i){n.textContent="";const f=document.createElement("div");f.className="card-widget-digits-container roll-animation";n.appendChild(f);const r=document.createElement("div");r.className="card-widget-digit-container current";r.style.transform="translateY(0)";f.appendChild(r);const e=document.createElement("div");e.className="card-widget-digit";e.textContent=t||"0";r.appendChild(e);const u=document.createElement("div");u.className="card-widget-digit-container new";u.style.transform="translateY(100%)";f.appendChild(u);const o=document.createElement("div");o.className="card-widget-digit";o.textContent=i;u.appendChild(o);setTimeout(()=>{r.style.transform="translateY(-100%)",u.style.transform="translateY(0)"},50)}function animateCardWidgetFlip(n,t,i){n.textContent="";const y=window.getComputedStyle(n),p=y.fontSize,r=document.createElement("div");r.className="card-widget-digits-container flip-animation";r.style.fontSize=p;n.appendChild(r);const u=document.createElement("div");u.className="flip-panels";r.appendChild(u);const o=document.createElement("div");o.className="static-bottom";u.appendChild(o);const s=document.createElement("div");s.className="digit";s.textContent=t||"0";o.appendChild(s);const h=document.createElement("div");h.className="static-top";u.appendChild(h);const c=document.createElement("div");c.className="digit";c.textContent=i;h.appendChild(c);const f=document.createElement("div");f.className="flip-card";u.appendChild(f);const l=document.createElement("div");l.className="flip-card-front";f.appendChild(l);const a=document.createElement("div");a.className="digit";a.textContent=t||"0";l.appendChild(a);const v=document.createElement("div");v.className="flip-card-back";f.appendChild(v);const e=document.createElement("div");e.className="digit";e.textContent=i;e.setAttribute("data-debug","back-digit");v.appendChild(e);console.log(`Animating flip from ${t} to ${i}`);setTimeout(()=>{r.classList.add("flipping"),setTimeout(()=>{n.contains(r)&&updateCardWidgetContent(n,i)},650)},50)}function updateCardWidgetContent(n,t){n.setAttribute("data-current-value",t);const i=n.getAttribute("data-animation");if(i){n.textContent="";const u=window.getComputedStyle(n),f=u.fontSize,r=document.createElement("div");if(r.className="card-widget-digits-container",r.style.fontSize=f,i==="roll"?r.classList.add("roll-animation"):i==="flip"&&r.classList.add("flip-animation"),n.appendChild(r),i==="flip"){const n=document.createElement("div");n.className="flip-panels";r.appendChild(n);const i=document.createElement("div");i.className="static-top";i.style.opacity="1";n.appendChild(i);const u=document.createElement("div");u.className="digit";u.textContent=t;i.appendChild(u);const f=document.createElement("div");f.className="static-bottom";n.appendChild(f);const e=document.createElement("div");e.className="digit";e.textContent=t;f.appendChild(e)}else{const n=document.createElement("div");n.className="card-widget-digit-container";i==="roll"&&(n.style.transform="translateY(0)");r.appendChild(n);const u=document.createElement("div");u.className="card-widget-digit";u.textContent=t;n.appendChild(u)}}else n.textContent=t}function animateCardWidgetRoll(n,t,i){n.textContent="";const f=document.createElement("div");f.className="card-widget-digits-container roll-animation";n.appendChild(f);const r=document.createElement("div");r.className="card-widget-digit-container current";r.style.transform="translateY(0)";f.appendChild(r);const e=document.createElement("div");e.className="card-widget-digit";e.textContent=t||"0";r.appendChild(e);const u=document.createElement("div");u.className="card-widget-digit-container new";u.style.transform="translateY(100%)";f.appendChild(u);const o=document.createElement("div");o.className="card-widget-digit";o.textContent=i;u.appendChild(o);setTimeout(()=>{r.style.transform="translateY(-100%)",u.style.transform="translateY(0)"},50)}function animateCardWidgetFlip(n,t,i){n.textContent="";const y=window.getComputedStyle(n),p=y.fontSize,r=document.createElement("div");r.className="card-widget-digits-container flip-animation";r.style.fontSize=p;n.appendChild(r);const u=document.createElement("div");u.className="flip-panels";r.appendChild(u);const o=document.createElement("div");o.className="static-bottom";u.appendChild(o);const s=document.createElement("div");s.className="digit";s.textContent=t||"0";o.appendChild(s);const h=document.createElement("div");h.className="static-top";u.appendChild(h);const c=document.createElement("div");c.className="digit";c.textContent=i;h.appendChild(c);const f=document.createElement("div");f.className="flip-card";u.appendChild(f);const l=document.createElement("div");l.className="flip-card-front";f.appendChild(l);const a=document.createElement("div");a.className="digit";a.textContent=t||"0";l.appendChild(a);const v=document.createElement("div");v.className="flip-card-back";f.appendChild(v);const e=document.createElement("div");e.className="digit";e.textContent=i;e.setAttribute("data-debug","back-digit");v.appendChild(e);console.log(`Animating flip from ${t} to ${i}`);setTimeout(()=>{r.classList.add("flipping"),setTimeout(()=>{n.contains(r)&&updateCardWidgetContent(n,i)},650)},50)}function renderCountdownWidgets(){console.log("Rendering CountdownWidgets");const n=document.querySelectorAll('[id^="countdown-widget-"]');n.forEach(n=>{function f(){const r=(new Date).getTime(),t=new Date(u).getTime();if(isNaN(t))return console.error(`Invalid target date specified for ${i}`),{days:0,hours:0,minutes:0,seconds:0,completed:!0};const n=t-r;return n<=0?{days:0,hours:0,minutes:0,seconds:0,completed:!0}:{days:Math.floor(n/864e5),hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3),completed:!1}}function e(i){const u=n=>n.toString().padStart(2,"0");t.days&&t.days.setAttribute("data-value",u(i.days));t.hours&&t.hours.setAttribute("data-value",u(i.hours));t.minutes&&t.minutes.setAttribute("data-value",u(i.minutes));t.seconds&&t.seconds.setAttribute("data-value",u(i.seconds));i.completed&&(n.dispatchEvent(new CustomEvent("countdownComplete")),r&&r())}const i=n.id,u=n.getAttribute("data-target-date-time");if(!u){console.warn(`No target date specified for ${i}`);return}const t={days:n.querySelector("[id$='-days'] .number"),hours:n.querySelector("[id$='-hours'] .number"),minutes:n.querySelector("[id$='-minutes'] .number"),seconds:n.querySelector("[id$='-seconds'] .number")};const r=window.creativeTicker.subscribe(i,()=>e(f()),1e3);n.unsubscribe=r;const o=new MutationObserver(t=>{t.forEach(t=>{t.removedNodes.forEach(t=>{t===n&&n.unsubscribe&&(n.unsubscribe(),o.disconnect())})})});o.observe(n.parentNode,{childList:!0});e(f())})}function renderSlideLayouts(){console.log("Rendering SlideLayouts");const n=document.querySelectorAll('[id^="slide-layout-"]');n.forEach(()=>{})}function renderVideoWidgets(){console.log("Rendering VideoWidgets");const n=document.querySelectorAll('[id^="video-widget-"]');n.forEach(n=>{const t=document.createElement("video"),i=document.createElement("source");i.href=n.getAttribute("data-src");t.appendChild(i);n.appendChild(t)})}window.creativeTicker=window.creativeTicker||{interval:null,tickRate:100,lastTick:Date.now(),subscribers:new Map,start(){this.interval||(this.lastTick=Date.now(),this.interval=setInterval(()=>{const n=Date.now(),t=n-this.lastTick;this.lastTick=n;this.subscribers.forEach(n=>{n.elapsed+=t,n.elapsed>=n.updateRate&&(n.callback(),n.elapsed=0)})},this.tickRate))},subscribe(n,t,i){return this.subscribers.set(n,{callback:t,updateRate:i,elapsed:0}),this.start(),()=>this.subscribers.delete(n)}}