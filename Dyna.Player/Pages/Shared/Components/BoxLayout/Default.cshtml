@model BoxLayoutClass
@using Dyna.Player.Models
@using Dyna.Player.TagHelpers
@using Newtonsoft.Json
@using Dyna.Player.Utilities

<div id="box-layout-@(Model.Identifier ?? Guid.NewGuid().ToString("N"))" class="@(Model.Classes ?? "")" style="@ConversionUtilities.GenerateCssStyleString(Model.Styles)">
    @if (Model.Contents != null)
    {
        @foreach (var widgetContainer in Model.Contents)
        {
            if (widgetContainer.ImageWidget != null)
            {
                @await Component.InvokeAsync("ImageWidget", widgetContainer.ImageWidget)
            }
            else if (widgetContainer.CountdownWidget != null)
            {
                @await Component.InvokeAsync("CountdownWidget", widgetContainer.CountdownWidget)
            }
            else if (widgetContainer.VideoWidget != null)
            {
                @await Component.InvokeAsync("VideoWidget", widgetContainer.VideoWidget)
            }
            else if (widgetContainer.TextWidget != null)
            {
                @await Component.InvokeAsync("TextWidget", widgetContainer.TextWidget)
            }
            else if (widgetContainer.CardWidget != null)
            {
                @await Component.InvokeAsync("CardWidget", widgetContainer.CardWidget)
            }
            else if (widgetContainer.BoxLayout != null)
            {
                @await Component.InvokeAsync("BoxLayout", widgetContainer.BoxLayout)
            }
        }
    }
</div>