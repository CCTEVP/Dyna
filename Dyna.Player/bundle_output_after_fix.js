function renderSlideLayouts(){console.log("Rendering SlideLayouts");const n=document.querySelectorAll('[id^="slide-layout-"]');n.forEach(()=>{})}function renderBoxLayouts(){console.log("Rendering BoxLayouts");const n=document.querySelectorAll('[id^="box-layout-"]');n.forEach(()=>{})}function renderCardWidgets(){const n=document.querySelectorAll('div[id^="card-widget-"]');n.length!==0&&n.forEach(n=>{if(n.id||(n.id=`card-widget-${Math.random().toString(36).substr(2,9)}`),!n.hasAttribute("data-current-value")){const t=n.getAttribute("data-value")||"0";n.setAttribute("data-current-value",t)}})}function handleAttributeChange(n,t,i){if(t==="data-value"){const t=n.getAttribute("data-current-value")||"";if(i!==t){n.setAttribute("data-current-value",i);const r=n.getAttribute("data-animation");switch(r){case"roll":typeof animateCardWidgetRoll=="function"?animateCardWidgetRoll(n,t,i):updateCardWidgetContent(n,i);break;case"flip":typeof animateCardWidgetFlip=="function"?animateCardWidgetFlip(n,t,i):updateCardWidgetContent(n,i);break;default:updateCardWidgetContent(n,i)}}}}function animateCardWidgetRoll(n,t,i){n.textContent="";const f=document.createElement("div");f.className="card-widget-digits-container roll-animation";n.appendChild(f);const r=document.createElement("div");r.className="card-widget-digit-container current";r.style.transform="translateY(0)";f.appendChild(r);const e=document.createElement("div");e.className="card-widget-digit";e.textContent=t||"0";r.appendChild(e);const u=document.createElement("div");u.className="card-widget-digit-container new";u.style.transform="translateY(100%)";f.appendChild(u);const o=document.createElement("div");o.className="card-widget-digit";o.textContent=i;u.appendChild(o);setTimeout(()=>{r.style.transform="translateY(-100%)",u.style.transform="translateY(0)"},50)}function animateCardWidgetFlip(n,t,i){n.textContent="";const y=window.getComputedStyle(n),p=y.fontSize,r=document.createElement("div");r.className="card-widget-digits-container flip-animation";r.style.fontSize=p;n.appendChild(r);const u=document.createElement("div");u.className="flip-panels";r.appendChild(u);const o=document.createElement("div");o.className="static-bottom";u.appendChild(o);const s=document.createElement("div");s.className="digit";s.textContent=t||"0";o.appendChild(s);const h=document.createElement("div");h.className="static-top";u.appendChild(h);const c=document.createElement("div");c.className="digit";c.textContent=i;h.appendChild(c);const f=document.createElement("div");f.className="flip-card";u.appendChild(f);const l=document.createElement("div");l.className="flip-card-front";f.appendChild(l);const a=document.createElement("div");a.className="digit";a.textContent=t||"0";l.appendChild(a);const v=document.createElement("div");v.className="flip-card-back";f.appendChild(v);const e=document.createElement("div");e.className="digit";e.textContent=i;e.setAttribute("data-debug","back-digit");v.appendChild(e);setTimeout(()=>{r.classList.add("flipping"),setTimeout(()=>{n.contains(r)&&updateCardWidgetContent(n,i)},650)},50)}function updateCardWidgetContent(n,t){n.setAttribute("data-current-value",t);const i=n.getAttribute("data-animation");if(i){n.textContent="";const u=window.getComputedStyle(n),f=u.fontSize,r=document.createElement("div");if(r.className="card-widget-digits-container",r.style.fontSize=f,i==="roll"?r.classList.add("roll-animation"):i==="flip"&&r.classList.add("flip-animation"),n.appendChild(r),i==="flip"){const n=document.createElement("div");n.className="flip-panels";r.appendChild(n);const i=document.createElement("div");i.className="static-top";i.style.opacity="1";n.appendChild(i);const u=document.createElement("div");u.className="digit";u.textContent=t;i.appendChild(u);const f=document.createElement("div");f.className="static-bottom";n.appendChild(f);const e=document.createElement("div");e.className="digit";e.textContent=t;f.appendChild(e)}else{const n=document.createElement("div");n.className="card-widget-digit-container";i==="roll"&&(n.style.transform="translateY(0)");r.appendChild(n);const u=document.createElement("div");u.className="card-widget-digit";u.textContent=t;n.appendChild(u)}}else n.textContent=t}function renderCountdownWidgets(){const n=document.querySelectorAll('div[id^="countdown-widget-"]');n.length!==0&&n.forEach(n=>{const t=n.getAttribute("data-target-date-time");if(t){const i=new Date(t);isNaN(i.getTime())||setupCountdown(n,i)}})}function setupCountdown(n,t){const i={days:n.querySelector("#box-layout-days .number"),hours:n.querySelector("#box-layout-hours .number"),minutes:n.querySelector("#box-layout-minutes .number"),seconds:n.querySelector("#box-layout-seconds .number")},r=calculateTimeRemaining(new Date,t),u={days:r.days.toString().padStart(2,"0"),hours:r.hours.toString().padStart(2,"0"),minutes:r.minutes.toString().padStart(2,"0"),seconds:r.seconds.toString().padStart(2,"0")};setTimeout(()=>{i.days&&i.days.setAttribute("data-value",u.days),i.hours&&i.hours.setAttribute("data-value",u.hours),i.minutes&&i.minutes.setAttribute("data-value",u.minutes),i.seconds&&i.seconds.setAttribute("data-value",u.seconds),n.setAttribute("data-status",r.total<=0?"expired":"active")},500);window.creativeTicker?window.creativeTicker.subscribe(`countdown-${n.id}`,()=>updateCountdown(n,i,t),1e3):setInterval(()=>updateCountdown(n,i,t),1e3)}function updateCountdown(n,t,i){const s=new Date,r=calculateTimeRemaining(s,i);r.total<=0?n.setAttribute("data-status","expired"):n.setAttribute("data-status","active");const u=r.days.toString().padStart(2,"0"),f=r.hours.toString().padStart(2,"0"),e=r.minutes.toString().padStart(2,"0"),o=r.seconds.toString().padStart(2,"0");if(t.days){const n=t.days.getAttribute("data-value");n!==u&&t.days.setAttribute("data-value",u)}if(t.hours){const n=t.hours.getAttribute("data-value");n!==f&&t.hours.setAttribute("data-value",f)}if(t.minutes){const n=t.minutes.getAttribute("data-value");n!==e&&t.minutes.setAttribute("data-value",e)}if(t.seconds){const n=t.seconds.getAttribute("data-value");n!==o&&t.seconds.setAttribute("data-value",o)}}function calculateTimeRemaining(n,t){let i=Math.max(0,t-n)/1e3;const e=i,r=Math.floor(i/86400);i-=r*86400;const u=Math.floor(i/3600)%24;i-=u*3600;const f=Math.floor(i/60)%60;i-=f*60;const o=Math.floor(i%60);return{days:r,hours:u,minutes:f,seconds:o,total:e}}function renderTextWidgets(){console.log("Rendering TextWidgets");const n=document.querySelectorAll('[id^="text-widget-"]');n.forEach(()=>{})}window.creativeTicker=window.creativeTicker||{interval:null,tickRate:10,lastTick:Date.now(),subscribers:new Map,start(){this.interval||(this.lastTick=Date.now(),this.interval=setInterval(()=>{const n=Date.now(),t=n-this.lastTick;this.lastTick=n;this.subscribers.forEach(n=>{n.elapsed+=t,n.elapsed>=n.updateRate&&(n.callback(),n.elapsed=0)})},this.tickRate))},subscribe(n,t,i){return this.subscribers.set(n,{callback:t,updateRate:i,elapsed:0}),this.start(),()=>this.subscribers.delete(n)}};window.widgetInitializer={renderFunctions:{},register:function(n,t){this.renderFunctions[n]=t},initializeAll:function(){console.log("Rendering widgets:");const n=["SlideLayouts","BoxLayouts","CardWidgets","TextWidgets","CountdownWidgets",];n.forEach(n=>{if(this.renderFunctions[n]){console.log(`Rendering ${n}`);try{this.renderFunctions[n]()}catch(t){console.error(`Error initializing ${n}:`,t)}}});Object.keys(this.renderFunctions).forEach(t=>{if(!n.includes(t)){console.log(`Rendering ${t}`);try{this.renderFunctions[t]()}catch(i){console.error(`Error initializing ${t}:`,i)}}})}};document.addEventListener("DOMContentLoaded",function(){window.widgetInitializer.initializeAll()});window.widgetInitializer?window.widgetInitializer.register("CardWidgets",renderCardWidgets):document.addEventListener("DOMContentLoaded",renderCardWidgets);document.addEventListener("DOMContentLoaded",renderCountdownWidgets);window.CardWidgetAnimationSystem=function(){function f(t,i){n[t]=i}function r(n,t){n.setAttribute("data-value",t);n.setAttribute("data-current-value",t);const r=n.querySelectorAll("div[style*='display: flex']");r.forEach(n=>{n.textContent=t});i.add(n.id)}function e(t){const r=t.getAttribute("data-current-value"),f=t.getAttribute("data-animation")||"default";if(r!=="00"||i.has(t.id)){const u=r==="00"?"01":"00";t.setAttribute("data-current-value",u);setTimeout(()=>{n[f]?n[f](t,u,r):n["default"](t,u,r)},50)}}function o(t,r){const u=t.getAttribute("data-current-value"),f=t.getAttribute("data-animation")||"default";i.add(t.id);r!==u&&(n[f]?n[f](t,u,r):n["default"](t,u,r))}function s(){function n(n){t.has(n.id)||(i.observe(n,{attributes:!0}),t.add(n.id),n.setAttribute("data-has-observer","true"))}const i=new MutationObserver(n=>{n.forEach(n=>{if(n.type==="attributes"&&n.attributeName==="data-value"){const t=n.target,i=t.getAttribute("data-value");o(t,i)}})});const r=document.querySelectorAll('div[id^="card-widget-"]');r.forEach(n);const u=new MutationObserver(i=>{i.forEach(i=>{i.type==="childList"&&i.addedNodes.length>0&&i.addedNodes.forEach(i=>{if(i.nodeType===1){i.id&&i.id.startsWith("card-widget-")&&!t.has(i.id)&&n(i);const r=i.querySelectorAll?i.querySelectorAll('div[id^="card-widget-"]:not([data-has-observer="true"])'):[];r.length>0&&r.forEach(n)}})})});u.observe(document.body,{childList:!0,subtree:!0});setInterval(()=>{const t=document.querySelectorAll('div[id^="card-widget-"]:not([data-has-observer="true"])');t.length>0&&t.forEach(n)},2e3)}function u(){s();document.addEventListener("click",n=>{const t=n.target.closest('div[id^="card-widget-"]');if(t){const n=parseInt(t.getAttribute("data-value"))||0;t.setAttribute("data-value",(n+1).toString())}})}const t=new Set,i=new Set,n={"default":function(n,t,i){r(n,i)}};return document.addEventListener("DOMContentLoaded",u),{registerAnimationHandler:f,updateCardWidgetContent:r,forceAnimationUpdate:e,initialize:u}}(),function(){function n(n,t,i){if(t!==i){let r=n.querySelector(".roll-animation-container");if(r){const n=r.querySelector(".current-digit"),u=r.querySelector(".new-digit");n&&u&&(n.textContent=t,u.textContent=i,n.style.transform="translateY(0)",u.style.transform="translateY(100%)")}else{Array.from(n.children).forEach(n=>{n.classList.contains("roll-animation-container")||(n.style.visibility="hidden")});r=document.createElement("div");r.className="roll-animation-container";r.style.position="absolute";r.style.top="0";r.style.left="0";r.style.width="100%";r.style.height="100%";r.style.overflow="hidden";r.style.zIndex="10";r.style.fontSize=window.getComputedStyle(n).fontSize;r.style.color=window.getComputedStyle(n).color;r.style.backgroundColor="transparent";const f=document.createElement("div");f.className="current-digit";f.style.position="absolute";f.style.width="100%";f.style.height="100%";f.style.display="flex";f.style.justifyContent="center";f.style.alignItems="center";f.style.transition="transform 0.5s ease-in-out";f.textContent=t;r.appendChild(f);const u=document.createElement("div");u.className="new-digit";u.style.position="absolute";u.style.width="100%";u.style.height="100%";u.style.display="flex";u.style.justifyContent="center";u.style.alignItems="center";u.style.transition="transform 0.5s ease-in-out";u.style.transform="translateY(100%)";u.textContent=i;r.appendChild(u);n.appendChild(r)}const u=r.querySelector(".current-digit"),f=r.querySelector(".new-digit");setTimeout(()=>{u.style.transform="translateY(-100%)",f.style.transform="translateY(0)",setTimeout(()=>{if(n.setAttribute("data-current-value",i),r.parentNode===n){const t=n.querySelectorAll("div:not(.roll-animation-container)");t.forEach(n=>{n.style.visibility==="hidden"&&(n.textContent=i,n.style.visibility="visible")});n.removeChild(r)}},500)},20)}}window.CardWidgetAnimationSystem&&window.CardWidgetAnimationSystem.registerAnimationHandler("roll",n)}(),function(){function n(n,t,i){const r=n.querySelector('[data-role="flip-card"]'),u=n.querySelector('[data-role="static-top"]'),f=n.querySelector('[data-role="top-digit"]'),e=n.querySelector('[data-role="back-digit"]');if(!r||!u||!f||!e){n.setAttribute("data-current-value",i);const t=n.querySelector("div");t&&(t.textContent=i);return}f.textContent=i;e.textContent=i;const o={phase:{DELAY:"delay",FLIP:"flip",SHOW_TOP:"showTop",COMPLETE:"complete"}.DELAY,elapsed:0,totalDelay:50,flipDuration:600,showTopAt:300};setTimeout(()=>{r.style.transform="rotateX(-180deg)",r.style.transition="transform 0.6s ease-in-out",setTimeout(()=>{u.style.opacity="1",u.style.transition="opacity 0.2s ease-in-out"},300),setTimeout(()=>{n.setAttribute("data-current-value",i);r.style.transform="rotateX(0deg)";r.style.transition="none";u.style.opacity="0";const t=n.querySelectorAll("div[style*='display: flex']");t.forEach(n=>{n.textContent=i})},650)},50)}window.CardWidgetAnimationSystem&&window.CardWidgetAnimationSystem.registerAnimationHandler("flip",n)}()